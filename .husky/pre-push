#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

## Prevent pushing if any .env files are tracked in git.
# This keeps local environment files safe while allowing you to keep them locally.
# exclude .env.example from the check (it's safe to track)
tracked_envs=$(git ls-files -- "*.env" ".env*" 2>/dev/null | grep -v '^.env.example$' || true)
if [ -n "$tracked_envs" ]; then
  echo "ERROR: The following env-like files are tracked by git and may contain secrets:"
  echo "$tracked_envs"
  echo "\nRemove them from the index (example): git rm --cached <file> && git commit -m 'chore: untrack local env'"
  exit 1
fi

exit 0
